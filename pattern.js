function pattern(w, h) {
  if (timer >= 25000.0 && timer <= 27000.0) {
    step1 = map(timer, 25000.0, 27000.0, 160, 250);
    step2 = map(timer, 25000.0, 27000.0, 100, 160);
    step3 = map(timer, 25000.0, 27000.0, 65, 100);
    step4 = map(timer, 25000.0, 27000.0, 40, 65);
  } else if (timer >= 27000.0 && timer <= 29000.0) {
    step1 = map(timer, 27000.0, 29000.0, 250, 160);
    step2 = map(timer, 27000.0, 29000.0, 160, 100);
    step3 = map(timer, 27000.0, 29000.0, 100, 65);
    step4 = map(timer, 27000.0, 29000.0, 65, 40);
  } else if (timer >= 32500.0 && timer <= 35000.0) {
    step1 = map(timer, 32500.0, 35000.0, 160, 250);
    step2 = map(timer, 32500.0, 35000.0, 100, 160);
    step3 = map(timer, 32500.0, 35000.0, 65, 100);
    step4 = map(timer, 32500.0, 35000.0, 40, 65);
  } else if (timer >= 35000.0 && timer <= 36000.0) {
    step1 = map(timer, 35000.0, 36000.0, 250, 160);
    step2 = map(timer, 35000.0, 36000.0, 160, 100);
    step3 = map(timer, 35000.0, 36000.0, 100, 65);
    step4 = map(timer, 35000.0, 36000.0, 65, 40);
  }

  if (timer >= 49000.0 && timer <= 50500.0) {
    step1 = map(timer, 49000.0, 50500.0, 160, 250);
    step2 = map(timer, 49000.0, 50500.0, 100, 160);
    step3 = map(timer, 49000.0, 50500.0, 65, 100);
    step4 = map(timer, 49000.0, 50500.0, 40, 65);
  } else if (timer >= 50500.0 && timer <= 51000.0) {
    step1 = 250;
    step2 = 160;
    step3 = 100;
    step4 = 65;
  } else if (timer >= 51000.0 && timer <= 52000.0) {
    step1 = map(timer, 51000.0, 52000.0, 250, 160);
    step2 = map(timer, 51000.0, 52000.0, 160, 100);
    step3 = map(timer, 51000.0, 52000.0, 100, 65);
    step4 = map(timer, 51000.0, 52000.0, 65, 40);
  } else if (timer >= 59000.0 && timer <= 60500.0) {
    step1 = map(timer, 59000.0, 60500.0, 160, 250);
    step2 = map(timer, 59000.0, 60500.0, 100, 160);
    step3 = map(timer, 59000.0, 60500.0, 65, 100);
    step4 = map(timer, 59000.0, 60500.0, 40, 65);
  } else if (timer >= 60500.0 && timer <= 61000.0) {
    step1 = 250;
    step2 = 160;
    step3 = 100;
    step4 = 65;
  } else if (timer >= 61000.0 && timer <= 62000.0) {
    step1 = map(timer, 61000.0, 62000.0, 250, 160);
    step2 = map(timer, 61000.0, 62000.0, 160, 100);
    step3 = map(timer, 61000.0, 62000.0, 100, 65);
    step4 = map(timer, 61000.0, 62000.0, 65, 40);
  } else if (timer >= 69000.0 && timer <= 70500.0) {
    step1 = map(timer, 69000.0, 70500.0, 160, 250);
    step2 = map(timer, 69000.0, 70500.0, 100, 160);
    step3 = map(timer, 69000.0, 70500.0, 65, 100);
    step4 = map(timer, 69000.0, 70500.0, 40, 65);
  } else if (timer >= 70500.0 && timer <= 71000.0) {
    step1 = 250;
    step2 = 160;
    step3 = 100;
    step4 = 65;
  } else if (timer >= 71000.0 && timer <= 72000.0) {
    step1 = map(timer, 71000.0, 72000.0, 250, 160);
    step2 = map(timer, 71000.0, 72000.0, 160, 100);
    step3 = map(timer, 71000.0, 72000.0, 100, 65);
    step4 = map(timer, 71000.0, 72000.0, 65, 40);
  }

  if (timer >= 83000.0 && timer <= 85000.0) {
    step1 = map(timer, 83000.0, 85000.0, 160, 250);
    step2 = map(timer, 83000.0, 85000.0, 100, 160);
    step3 = map(timer, 83000.0, 85000.0, 65, 100);
    step4 = map(timer, 83000.0, 85000.0, 40, 65);
  } else if (timer >= 85000.0 && timer <= 85500.0) {
    step1 = 250;
    step2 = 160;
    step3 = 100;
    step4 = 65;
  } else if (timer >= 85500.0 && timer <= 87000.0) {
    step1 = map(timer, 85500.0, 87000.0, 250, 160);
    step2 = map(timer, 85500.0, 87000.0, 160, 100);
    step3 = map(timer, 85500.0, 87000.0, 100, 65);
    step4 = map(timer, 85500.0, 87000.0, 65, 40);
  } else if (timer >= 104000.0 && timer <= 106000.0) {
    step1 = map(timer, 104000.0, 106000.0, 160, 250);
    step2 = map(timer, 104000.0, 106000.0, 100, 160);
    step3 = map(timer, 104000.0, 106000.0, 65, 100);
    step4 = map(timer, 104000.0, 106000.0, 40, 65);
  } else if (timer >= 106000.0 && timer <= 106500.0) {
    step1 = 250;
    step2 = 160;
    step3 = 100;
    step4 = 65;
  } else if (timer >= 106500.0 && timer <= 108000.0) {
    step1 = map(timer, 106500.0, 108000.0, 250, 160);
    step2 = map(timer, 106500.0, 108000.0, 160, 100);
    step3 = map(timer, 106500.0, 108000.0, 100, 65);
    step4 = map(timer, 106500.0, 108000.0, 65, 40);
  }
  for (var i = -10; i <= 10; i++) {
    if (i % 2 == 0) {
      for (j = -16; j <= 16; j += 2) {
        if (i == 0 && j == 0) {
          stroke(step1);
        } else if ((i == 0 && j == 2) || (i == 0 && j == -2)) {
          stroke(step1);
        } else if (
          (i == -2 && j == 0) ||
          (i == +2 && j == 0) ||
          (i == -2 && j == 2) ||
          (i == +2 && j == 2) ||
          (i == -2 && j == -2) ||
          (i == +2 && j == -2) ||
          (i == 0 && j == -4) ||
          (i == 0 && j == +4)
        ) {
          stroke(step2);
        } else if (
          (i == -2 && j == 4) ||
          (i == +2 && j == 4) ||
          (i == -2 && j == -4) ||
          (i == +2 && j == -4) ||
          (i == 0 && j == -6) ||
          (i == 0 && j == 6)
        ) {
          stroke(step3);
        } else if (
          (i == -2 && j == 6) ||
          (i == +2 && j == 6) ||
          (i == -2 && j == -6) ||
          (i == +2 && j == -6) ||
          (i == 0 && j == -8) ||
          (i == 0 && j == 8) ||
          (i == -4 && j == 2) ||
          (i == +4 && j == 2) ||
          (i == -4 && j == -2) ||
          (i == +4 && j == -2) ||
          (i == -4 && j == -4) ||
          (i == +4 && j == -4) ||
          (i == -4 && j == 4) ||
          (i == +4 && j == 4) ||
          (i == -4 && j == 0) ||
          (i == +4 && j == 0)
        ) {
          stroke(step4);
        } else {
          stroke(40);
        }

        push();
        translate(width / 2 + i * w, height / 2 + j * h);
        if (n == 24) {
          rotate(15);
        }
        polygon(0, 0, n);
        pop();
      }
    } else {
      for (j = -15; j <= 15; j += 2) {
        if (
          (i == 1 && j == 1) ||
          (i == 1 && j == -1) ||
          (i == -1 && j == 1) ||
          (i == -1 && j == -1)
        ) {
          stroke(step1);
        } else if (
          (i == 1 && j == 3) ||
          (i == 1 && j == -3) ||
          (i == -1 && j == 3) ||
          (i == -1 && j == -3)
        ) {
          stroke(step2);
        } else if (
          (i == 3 && j == 1) ||
          (i == 3 && j == -1) ||
          (i == 3 && j == 3) ||
          (i == 3 && j == -3) ||
          (i == -3 && j == 1) ||
          (i == -3 && j == -1) ||
          (i == -3 && j == 3) ||
          (i == -3 && j == -3) ||
          (i == 1 && j == 5) ||
          (i == 1 && j == -5) ||
          (i == -1 && j == 5) ||
          (i == -1 && j == -5)
        ) {
          stroke(step3);
        } else if (
          (i == 3 && j == -5) ||
          (i == -3 && j == 5) ||
          (i == -3 && j == -5) ||
          (i == 3 && j == 5) ||
          (i == 1 && j == 7) ||
          (i == 1 && j == -7) ||
          (i == -1 && j == 7) ||
          (i == -1 && j == -7)
        ) {
          stroke(step4);
        } else {
          stroke(40);
        }
        push();
        translate(width / 2 + i * w, height / 2 + j * h);
        if (n == 24) {
          rotate(15);
        }
        polygon(0, 0, n);
        pop();
      }
    }
  }

  if (vol >= 20 && vol <= 25) {
    
    frameRate(30);
    note_i = int(random([-7, 5, 7, -5, 6, -6]));
    if (note_i % 2 == 0) {
      note_j = int(random(-4, 4)) * 2;
    } else {
      note_j = int(random([-1, 1, -3, 3, 5, -5, 7, -7]));
    }
    carrier[int(random(2, 9))].play();
    frames = this.frameCount;
    noteColor = 40;
    noteColor2 = 40;
    hit = false;
  } else if (hit == false) {
    noteColor = noteColor * 1.055;
    noteColor2 = noteColor2 * 1.04;
    if (noteColor >= 159) {
      hit = true;
    }
  } else {
    if (noteColor >= 40) {
      noteColor *= 0.983;
    }
    if (noteColor2 >= 40) {
      noteColor2 *= 0.983;
    }
  }
  stroke(noteColor);
  push();
  translate(width / 2 + note_i * w, height / 2 + note_j * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();
  stroke(noteColor2);
  push();
  translate(width / 2 + note_i * w, height / 2 + (note_j + 2) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();

  push();
  translate(width / 2 + note_i * w, height / 2 + (note_j - 2) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();

  push();
  translate(width / 2 + (note_i - 1) * w, height / 2 + (note_j - 1) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();

  push();
  translate(width / 2 + (note_i - 1) * w, height / 2 + (note_j + 1) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();

  push();
  translate(width / 2 + (note_i + 1) * w, height / 2 + (note_j - 1) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();

  push();
  translate(width / 2 + (note_i + 1) * w, height / 2 + (note_j + 1) * h);
  if (n == 24) {
    rotate(15);
  }
  polygon(0, 0, n);
  pop();
}
